<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>학생 성적</title>

    <style>
        .cls_score
        {
            text-align: center;
        }
    </style>

</head>
<body>
    <h1>학생 성적</h1>
    <hr>
    <table border ="1" class = "cls_score">
        <tr>
            <th>구분</th>
            <th>국어</th>
            <th>영어</th>
            <th>수학</th>
        </tr>
        <tr>
            <td>1학년1학기</td>
            <td>80</td>
            <td>90</td>
            <td>74</td>
        </tr>
        <tr>
            <td>1학년2학기</td>
            <td>84</td>
            <td>94</td>
            <td>80</td>
        </tr>
        <tr>
            <td>2학년1학기</td>
            <td>80</td>
            <td>90</td>
            <td>88</td>
        </tr>
        <tr>
            <td>2학년2학기</td>
            <td>82</td>
            <td>86</td>
            <td>90</td>
        </tr>
        <tr>
            <td>3학년1학기</td>
            <td>92</td>
            <td>80</td>
            <td>80</td>
        </tr>
        <tr>
            <td>3학년2학기</td>
            <td>70</td>
            <td>80</td>
            <td>88</td>
        </tr>
    </table>

    <script>

        const calcScore = function(ar)
        {
            // ar는 배열, 우리 목적은 파라미터로 받아서 배열의 요소의 합과 평균을 구할 것이다
            let total = 0;
            let resAr = []; // 합,평균


            for (let i =0; i <ar.length; i++)
            {
                total = total + ar[i];
            }
            
            resAr[0] = total;
            //원래 코드
            resAr[1] = total / ar.length; 

            // 바꿔 본 코드
            // resAr[1] = (total / ar.length).toFixed(2);
            // 위의 함수는 V8 임시변수 기능으로 사용은 가능하나, 변수가 생길 시 데이터에 문제가 생김
            // 즉, 2자리로 끊어서 사용했는데 특정한 숫자 몇개는 소수점 4자리가 필요 때 이미 2자리 이후 데이터는 삭제했기때문에 사용 불가

            return resAr;
        }

        //[국어, 영어, 수학] * 6개 구조로 배열을 만든다.

        //   구 분    국어 영어 수학
        // 1학년 1학기	80	90	74
        // 1학년 2학기	84	94	80
        // 2학년 1학기	80	90	88
        // 2학년 2학기	82	86	90
        // 3학년 1학기	92	80	80
        // 3학년 2학기	70	80	88
        const score = [[80, 90, 74], 
                       [84, 94, 80], 
                       [80, 90, 88], 
                       [82, 86, 90], 
                       [92, 80, 80], 
                       [70, 80, 88]];

        // 잘 되는지 테스트
        // let aa = calcScore(score[0])         
        // console.log(aa[0]) // 0번의 합계 
        // console.log(aa[1]) // 0번의 평균
        
        let kor_sum = 0;
        let kor_avg = 0;

        for (let i = 0; i < score.length; i++)
        {
            kor_sum = kor_sum + score[i][0];
        }

        kor_avg = kor_sum / score.length;

        let eng_sum = 0;
        let eng_avg = 0;

        for (let i = 0; i < score.length; i++)
        {
            eng_sum = eng_sum + score[i][1];
        }

        eng_avg = eng_sum / score.length;

        let mth_sum = 0;
        let mth_avg = 0;

        for (let i = 0; i < score.length; i++)
        {
            mth_sum = mth_sum + score[i][2];
        }

        mth_avg = mth_sum / score.length;

        // console.log(kor_sum);
        // console.log(kor_avg);

        // console.log(eng_sum);
        // console.log(eng_avg);

        // console.log(mth_sum);
        // console.log(mth_avg);

        let outStr = "" //document.body.innerHTML는 너무 길기 때문에 outStr로 바꿔줌
        outStr += '<ul>';
        outStr += '<li>국어 총점 : '+ kor_sum + '점, 평균 : ' + kor_avg.toFixed(2) + '점' + '</li>'
        outStr += '<li>영어 총점 : '+ eng_sum + '점, 평균 : ' + eng_avg.toFixed(2) + '점' + '</li>'
        outStr += '<li>수학 총점 : '+ mth_sum + '점, 평균 : ' + mth_avg.toFixed(2) + '점' + '</li>'
        outStr += '</ul>';

        // document.body.innerHTML += '<ul>';
        // document.body.innerHTML += '<li>국어 총점 : '+ kor_sum + '점, 평균 : ' + kor_avg.toFixed(2) + '점' + '</li>'
        // document.body.innerHTML += '<li>영어 총점 : '+ eng_sum + '점, 평균 : ' + eng_avg.toFixed(2) + '점' + '</li>'
        // document.body.innerHTML += '<li>수학 총점 : '+ mth_sum + '점, 평균 : ' + mth_avg.toFixed(2) + '점' + '</li>'
        // document.body.innerHTML += '</ul>';

        document.body.innerHTML += outStr;

        let res = []; // []는 배열을 넣어주겠다는 의미
        //1학년 1학기 성적 
        sum = score[0][0] + score[0][1] + score[0][2];
        avg = sum / 3;
        res.push(sum); //[0] 첫번째 배열 생성
        res.push(avg.toFixed(2)); //[1] 배열 생성
        
        //1힉년 2학기 성적
        sum = score[1][0] + score[1][1] + score[1][2];
        avg = sum / 3;
        res.push(sum); // [2] 배열 생성
        res.push(avg.toFixed(2));

        //2학년 1학기 성적
        sum = score[2][0] + score[2][1] + score[2][2];
        avg = sum / 3;
        res.push(sum);
        res.push(avg.toFixed(2));

        //2학년 2학기
        sum = score[3][0] + score[3][1] + score[3][2];
        avg = sum / 3;
        res.push(sum);
        res.push(avg.toFixed(2));

        //3학년 1학기
        sum = score[4][0] + score[4][1] + score[4][2];
        avg = sum / 3;
        res.push(sum);
        res.push(avg.toFixed(2));

        //3학년 2학기
        sum = score[5][0] + score[5][1] + score[5][2];
        avg = sum / 3;
        res.push(sum);
        res.push(avg.toFixed(2));


        outStr = '';
        outStr += '<ul>'; // 위에 생성해준 학년/학기 적 let res = []; 참고 ,166번째 줄
        outStr += `<li>1학년 1학기 총점 : ${res[0]}점, 평균 :  ${res[1]} 점 </li>`; 
        outStr += `<li>1학년 2학기 총점 : ${res[2]}점, 평균 :  ${res[3]} 점 </li>`;
        outStr += `<li>2학년 1학기 총점 : ${res[4]}점, 평균 :  ${res[5]} 점 </li>`;
        outStr += `<li>2학년 2학기 총점 : ${res[6]}점, 평균 :  ${res[7]} 점 </li>`;
        outStr += `<li>3학년 1학기 총점 : ${res[8]}점, 평균 :  ${res[9]} 점 </li>`;
        outStr += `<li>3학년 1학기 총점 : ${res[10]}점, 평균 :  ${res[11]} 점 </li>`;
        outStr += '</ul>';

        document.body.innerHTML += outStr;


        // const score =  [[80, 90, 74], 
        //                 [84, 94, 80],
        //                 [80, 90, 88],
        //                 [82, 86, 90],
        //                 [92, 80, 80],
        //                 [70, 80, 88]];

        // let sum = 0;
        // let avg = 0;


        // console.log(score[0][0]);
        // console.log(score[1][0]);
        // console.log(score[2][0]);
        // console.log(score[3][0]);
        // console.log(score[4][0]);
        // console.log(score[5][0]);

        // for (let i =0; i<score.length; i++)
        // {
        //     sum = sum + score[i][0];
        // }

        // // avg = sum / score.length;
        // // console.log(typeof(avg)); // number로 결과값이 나옴

        // // avg = avg.toFixed(2); // = 뒤의 avg는 데이터값(=변수)
        // // console.log(typeof(avg)); //string로 결과값이 나옴
        // // avr = Number(avg); // 이렇게 설정해줘야 다시 string 값이 488(숫자)로 변환해서 나옴
        
        // console.log(sum);
        // // console.log(avg.toFixed(2)); // toFixed(원하는 소수점)


    </script>

    
    </body>
</html>